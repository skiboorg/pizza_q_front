(function(e){function t(t){for(var o,i,r=t[0],c=t[1],d=t[2],u=0,l=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&l.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t);while(l.length)l.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],o=!0,i=1;i<a.length;i++){var r=a[i];0!==n[r]&&(o=!1)}o&&(s.splice(t--,1),e=c(c.s=a[0]))}return e}var o={},i={2:0},n={2:0},s=[];function r(e){return c.p+"js/"+({1:"chunk-common"}[e]||e)+"."+{1:"b61295e7",3:"dd4beda4",4:"c5e090ed",5:"65f02703",6:"d700a280",7:"9d0c9022",8:"f5bac342",9:"0bf553aa",10:"a5207514",11:"766250ce",12:"6358030a",13:"0cfd344f",14:"2ee30a3d",15:"7adf0912",16:"a3eb3cfc",17:"19c6926b",18:"69030e18"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={1:1,3:1,4:1,5:1,6:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var o="css/"+({1:"chunk-common"}[e]||e)+"."+{1:"5a2b054d",3:"0c2f805b",4:"d1feb355",5:"9529423f",6:"15989a5c",7:"31d6cfe0",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0"}[e]+".css",n=c.p+o,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var d=s[r],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===o||u===n))return t()}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){d=l[r],u=d.getAttribute("data-href");if(u===o||u===n)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||n,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete i[e],m.parentNode.removeChild(m),a(s)},m.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){i[e]=0})));var o=n[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,a){o=n[e]=[t,a]}));t.push(o[2]=s);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(e);var l=new Error;d=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=n[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,a[1](l)}n[e]=void 0}};var m=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(a,o,function(t){return e[t]}.bind(null,o));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var m=u;s.push([0,0]),a()})({0:function(e,t,a){e.exports=a("2f39")},"0047":function(e,t,a){},"2f39":function(e,t,a){"use strict";a.r(t);a("e6cf"),a("ddb0"),a("5319"),a("7d6e"),a("e54f"),a("985d"),a("4e2f"),a("0047");var o=a("2b0e"),i=a("14c0"),n=a("42d2"),s=a("b05d"),r=a("515f"),c=a("2a19"),d=a("18d6"),u=a("f508");o["default"].use(s["a"],{config:{notify:{}},lang:i["a"],iconSet:n["a"],plugins:{Cookies:r["a"],Notify:c["a"],LocalStorage:d["a"],Loading:u["a"]}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},m=[],p={name:"App"},h=p,_=a("2877"),f=Object(_["a"])(h,l,m,!1,null,null,null),g=f.exports,y=a("2f62"),b=a("758b");const v=()=>({categories:[],items:[],recommended_items:[],recommended_items_for_meat:[],souses:[],openedPizza:0,openedMeat:0,currentPizza:null}),k={updateCategories(e,t){e.categories=t},updateSouses(e,t){e.souses=t},updateItems(e,t){e.items=t},updateRecommendedItems(e,t){e.recommended_items=t},updateRecommendedItemsForMeat(e,t){e.recommended_items_for_meat=t},updateOpenedPizza(e,t){e.openedPizza=t},updateOpenedMeat(e,t){e.openedMeat=t}},w={async fetchItems({state:e,commit:t,dispatch:a}){let o=this._vm.$cook.get("city_id");if(0===e.items.length){await this.dispatch("city/fetchCity"),o=this._vm.$cook.get("city_id");const e=await b["a"].get(`/api/items/get_souses_by_city?city_id=${o}`);t("updateSouses",e.data);const a=await b["a"].get(`/api/items/get_categories?city_id=${o}`),i=await b["a"].get(`/api/items/get_recommended_items?city_id=${o}`),n=await b["a"].get(`/api/items/get_recommended_items_for_meat?city_id=${o}`);t("updateRecommendedItems",i.data),t("updateRecommendedItemsForMeat",n.data),t("updateCategories",a.data)}},changeOpenedPizza({commit:e,state:t},a){e("updateOpenedPizza",a)},async fetchPizza({state:e},t){await b["a"].get(`/api/items/get_item_by_id/${t}`)}},P={categories:e=>e.categories,souses:e=>e.souses,items:e=>e.items,recommended_items:e=>e.recommended_items,recommended_items_for_meat:e=>e.recommended_items_for_meat,openedPizza:e=>e.openedPizza,currentPizza:e=>e.currentPizza,getOpenedMeat:e=>e.openedMeat};var C={namespaced:!0,state:v,mutations:k,actions:w,getters:P};const z=()=>({cities:[{id:1,adresses:[{id:1,address:"ул.Железнодорожная д.12",coordinates:"66.088411, 76.662433",city:1}],name:"Новый Уренгой",info:"Сеть мясных кафе",is_main:!0}],main_city:null,city_info:null,is_city_selected:!1,promos:[],banners:[],currentCity:{}}),$={updateCity(e,t){e.cities=t},updateMainCity(e,t){e.main_city=t},updateCitySelected(e,t){e.is_city_selected=t},updatePromos(e,t){e.promos=t},updateBanners(e,t){e.banners=t},updateCurrentCity(e,t){console.log("updateCurrentCity"),e.currentCity=t}},S={async fetchCity({commit:e,state:t,dispatch:a}){this._vm.$cook.get("city_selected")?console.log("city_selected",this._vm.$cook.get("city_selected")):this._vm.$cook.set("city_selected",!1);const o=this._vm.$cook.get("city_id"),i=this._vm.$cook.get("city_selected");i&&e("updateCitySelected",!0);const n=await this._vm.$api.get("/api/items/get_cities");if(o){e("updateCurrentCity",n.data.find((e=>e.id===o))),this._vm.$cook.set("metrika_id",n.data.find((e=>e.id===o)).metrika_id),this._vm.$cook.set("call_tracker_id",n.data.find((e=>e.id===o)).call_tracker_id);const t=await this._vm.$api.get(`/api/items/get_banners?city_id=${o}`);e("updateBanners",t.data);const a=await this._vm.$api.get(`/api/promotion/get_all?city_id=${o}`);e("updatePromos",a.data)}else a("changeMainCity",n.data.find((e=>!0===e.is_main)).id),e("updateCurrentCity",n.data.find((e=>!0===e.is_main))),this._vm.$cook.set("metrika_id",n.data.find((e=>!0===e.is_main)).metrika_id),this._vm.$cook.set("call_tracker_id",n.data.find((e=>!0===e.is_main)).call_tracker_id);e("updateCity",n.data)},async changeMainCity({commit:e,getters:t},a){let o=this._vm.$cook.get("city_id");if(o!==a){this._vm.$cook.remove("city_id"),this._vm.$cook.remove("metrika_id"),this._vm.$cook.remove("call_tracker_id"),this._vm.$cook.set("city_id",a),e("updateMainCity",a),e("updateCitySelected",!0),e("updateCurrentCity",t["cities"].find((e=>e.id===a))),this._vm.$cook.set("metrika_id",t["cities"].find((e=>e.id===a)).metrika_id),this._vm.$cook.set("call_tracker_id",t["cities"].find((e=>e.id===a)).call_tracker_id);const o=await this._vm.$api.get(`/api/items/get_banners?city_id=${a}`);e("updateBanners",o.data);const i=await this._vm.$api.get(`/api/promotion/get_all?city_id=${a}`);e("updatePromos",i.data)}}},O={cities:e=>e.cities,promos:e=>e.promos,banners:e=>e.banners,is_city_selected:e=>e.is_city_selected,mainCity:e=>e.main_city,currentCity:e=>e.currentCity};var M={namespaced:!0,state:z,mutations:$,actions:S,getters:O},j=a("1732");const U=()=>({items:{id:13,pizza_constructors:[],souces:[],items:[],total_price:0,total_bonuses:0,created_at:"",updated_at:"",is_apply_promo:!1,persons:1,client:null,guest:null},bonuses:0,promo:0}),A={updateBonuses(e,t){e.bonuses=t},updatePromo(e,t){e.promo=t},updateCart(e,t){e.items=t}},V={async fetchCart({commit:e,state:t,dispatch:a}){let o=this._vm.$cook.get("session_id");o||(r["a"].set("session_id",Object(j["a"])()),o=this._vm.$cook.get("session_id"));const i=await this._vm.$api.get(`/api/cart/get_cart?session_id=${o}`);e("updateCart",i.data)},eraseCart({commit:e,state:t},a){e("updateCart",{id:13,pizza_constructors:[],souces:[],items:[],total_price:0,total_bonuses:0,created_at:"",updated_at:"",persons:1,client:null,guest:null}),e("updatePromo",0),e("updateBonuses",0)},addBonuses({commit:e},t){e("updateBonuses",t)},addPromo({commit:e},t){e("updatePromo",t)}},x={is_apply_promo:e=>e.items.is_apply_promo,items_in_cart:e=>e.items,cart_items_count:e=>e.items.items.length+e.items.souces.length+e.items.pizza_constructors.length,cart_bonuses:e=>e.bonuses,cart_promo:e=>e.promo,cart_total_price:e=>{let t=e.items.total_price-e.bonuses;return e.promo>0?parseInt(t-t*e.promo/100):t},is_meat_in_cart:e=>e.items.items.filter((e=>e.item.category.is_meat)).length};var I={namespaced:!0,state:U,mutations:A,actions:V,getters:x};const R=()=>({constructor_visible:!1,pizza_choose_visible:!1,payment_url:!1,payment_visible:!1,right_menu:!1,auth_modal:!1,selected_category:0}),B={updateConstructorVisible(e,t){e.constructor_visible=t},updatePizzaChooseVisible(e,t){e.pizza_choose_visible=t},updatePaymentVisible(e,t){e.payment_visible=t},updatePaymentUrl(e,t){e.payment_url=t},updateRightMenu(e,t){e.right_menu=t},updateAuthModal(e,t){e.auth_modal=t},updateSelectedCategory(e,t){e.selected_category=t}},E={changeConstructorVisible({commit:e},t){e("updateConstructorVisible",t)},changePizzaChooseVisible({commit:e},t){e("updatePizzaChooseVisible",t)},changePaymentVisible({commit:e},t){e("updatePaymentVisible",t)},changePaymentUrl({commit:e},t){e("updatePaymentUrl",t)},changeRightMenuVisible({commit:e},t){e("updateRightMenu",t)},changeAuthModalVisible({commit:e},t){e("updateAuthModal",t)},changeSelectedCategory({commit:e},t){e("updateSelectedCategory",t)}},L={is_constructor_visible:e=>e.constructor_visible,is_pizza_choose_visible:e=>e.pizza_choose_visible,is_payment_visible:e=>e.payment_visible,payment_url:e=>e.payment_url,is_right_menu_visible:e=>e.right_menu,is_auth_modal_visible:e=>e.auth_modal,selected_category:e=>e.selected_category};var T={namespaced:!0,state:R,mutations:B,actions:E,getters:L},N=a("09f9");const F=()=>({user:{},loggedIn:!1}),q={updateUser(e,t){e.user=t},updateUserStatus(e,t){e.loggedIn=t}},D={loginUser({dispatch:e},t){b["a"].post("/auth/token/login/",t).then((t=>{this._vm.$cook.set("auth_token",t.data.auth_token),b["a"].defaults.headers.common["Authorization"]="Token "+t.data.auth_token,c["a"].create({message:"Получение данных пользователя ...",position:N["a"].lt.sm?"bottom":"bottom-right",color:"positive",icon:"announcement"}),e("getUser",!0)})).catch((function(e){c["a"].create({message:"Проверьте введеные данные",position:N["a"].lt.sm?"bottom":"bottom-right",color:"red",icon:"announcement"})}))},async getUser({commit:e,dispatch:t},a){try{const t=await b["a"].get("/api/user/me/");e("updateUser",t.data),e("updateUserStatus",!0)}catch(o){console.log(o),b["a"].defaults.headers.common["Authorization"]=null,this._vm.$cook.remove("auth_token"),this.$router.push("/")}},logoutUser({commit:e}){b["a"].post("/auth/token/logout/").then((t=>{b["a"].defaults.headers.common["Authorization"]=null,this._vm.$cook.remove("auth_token"),e("updateUser",{}),e("updateUserStatus",!1),this.dispatch("cart/fetchCart")})).catch((function(e){}))}},J={isLoggedIn:e=>e.loggedIn,user:e=>e.user};var K={namespaced:!0,state:F,mutations:q,actions:D,getters:J};o["default"].use(y["a"]);let H=null;var Q=function(){const e=new y["a"].Store({modules:{products:C,city:M,cart:I,componentState:T,auth:K},strict:!1});return H=e,e},G=a("8c4f");const W=e=>{const t=[{path:"/",component:()=>Promise.all([a.e(0),a.e(1),a.e(3)]).then(a.bind(null,"713b")),children:[{path:"",name:"index",component:()=>Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"8b24"))},{path:"cart",component:()=>Promise.all([a.e(0),a.e(1),a.e(12)]).then(a.bind(null,"7cb1"))},{path:"lk",component:()=>Promise.all([a.e(0),a.e(14)]).then(a.bind(null,"980d"))},{path:"checkout",component:()=>Promise.all([a.e(0),a.e(1),a.e(6)]).then(a.bind(null,"8b6f"))},{path:"promotions",component:()=>Promise.all([a.e(0),a.e(17)]).then(a.bind(null,"fa04"))},{path:"about",component:()=>Promise.all([a.e(0),a.e(1),a.e(4)]).then(a.bind(null,"7dd8"))},{path:"delivery",component:()=>Promise.all([a.e(0),a.e(1),a.e(7)]).then(a.bind(null,"da66"))},{path:"contacts",component:()=>Promise.all([a.e(0),a.e(1),a.e(13)]).then(a.bind(null,"083c"))},{path:"order/:order_code",component:()=>Promise.all([a.e(0),a.e(15)]).then(a.bind(null,"ebc4"))},{path:"order_self/:order_code",component:()=>Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"9a2d"))},{path:"policy",component:()=>Promise.all([a.e(0),a.e(1),a.e(16)]).then(a.bind(null,"4692"))},{path:"rules",component:()=>Promise.all([a.e(0),a.e(1),a.e(18)]).then(a.bind(null,"752d"))},{path:"vacancy",component:()=>Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,"0bf1"))},{path:"orders",component:()=>Promise.all([a.e(0),a.e(11)]).then(a.bind(null,"de12"))}]},{path:"*",component:()=>Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"e51e"))}];return t};var X=W;o["default"].use(G["a"]);var Y=function({store:e}){const t=X(e),a=new G["a"]({scrollBehavior:()=>({x:0,y:0}),routes:t,mode:"history",base:"/"});return a},Z=async function(){const e="function"===typeof Q?await Q({Vue:o["default"]}):Q,t="function"===typeof Y?await Y({Vue:o["default"],store:e}):Y;e.$router=t;const a={router:t,store:e,render:e=>e(g),el:"#q-app"};return{app:a,store:e,router:t}},ee=a("9483");Object(ee["a"])("/service-worker.js",{ready(){},registered(){},cached(){},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){},error(){}});var te=a("f13c"),ae=a.n(te);o["default"].use(ae.a);var oe=a("7212"),ie=a.n(oe);a("a7a3");o["default"].use(ie.a);var ne=a("bc3a"),se=a.n(ne),re=async({app:e,router:t,Vue:a,store:o,ssrContext:i})=>{const n=r["a"];if(window.location.host.split(".").length>2){const e=await se.a.get(`https://meat-coal.ru/api/items/get_city?domain=${window.location.host.split(".")[0]}`);n.set("city_selected",!0),n.set("city_id",e.data.id),n.set("metrika_id",e.data.metrika_id),n.set("call_tracker_id",e.data.call_tracker_id)}let s=n.get("auth_token");a.prototype.$cook=n,s&&await o.dispatch("auth/getUser"),o.dispatch("products/fetchItems"),o.dispatch("cart/fetchCart"),o.dispatch("city/fetchCity"),a.prototype.$user=o.state.auth},ce=a("f5ce");const de={apiKey:"b066466e-a620-495c-932e-8b328fb49452",lang:"ru_RU",coordorder:"latlong",version:"2.1"};o["default"].use(ce["a"],de);a("13d5");let ue=g.options||g,le="function"===typeof ue.preFetch;function me(e,t){const a=e?e.matched?e:t.resolve(e).route:t.currentRoute;return a?Array.prototype.concat.apply([],a.matched.map((e=>Object.keys(e.components).map((t=>{const a=e.components[t];return{path:e.path,c:a.options||a}}))))):[]}function pe(e,t,a){e.beforeResolve(((o,i,n)=>{const s=window.location.href.replace(window.location.origin,""),r=me(o,e),c=me(i,e);let d=!1;const u=r.filter(((e,t)=>d||(d=!c[t]||c[t].c!==e.c||e.path.indexOf("/:")>-1))).filter((e=>e.c&&"function"===typeof e.c.preFetch)).map((e=>e.c.preFetch));if(!0===le&&(le=!1,u.unshift(ue.preFetch)),0===u.length)return n();let l=!1;const m=e=>{l=!0,n(e)},p=()=>{!1===l&&n()};u.reduce(((e,n)=>e.then((()=>!1===l&&n({store:t,currentRoute:o,previousRoute:i,redirect:m,urlPath:s,publicPath:a})))),Promise.resolve()).then(p).catch((e=>{console.error(e),p()}))}))}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&a.e(0).then(a.t.bind(null,"a0db",7));const he="/";async function _e(){const{app:e,store:t,router:a}=await Z();let i=!1;const n=e=>{i=!0;const t=Object(e)===e?a.resolve(e).route.fullPath:e;window.location.href=t},s=window.location.href.replace(window.location.origin,""),r=[b["b"],void 0,void 0,re,void 0];for(let d=0;!1===i&&d<r.length;d++)if("function"===typeof r[d])try{await r[d]({app:e,router:a,store:t,Vue:o["default"],ssrContext:null,redirect:n,urlPath:s,publicPath:he})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==i&&(pe(a,t),new o["default"](e))}_e()},"758b":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var o=a("bc3a"),i=a.n(o),n=a("515f");const s=i.a.create({baseURL:"https://meat-coal.ru"});t["b"]=({app:e,router:t,Vue:a,store:o,ssrContext:i})=>{const r=n["a"];let c=r.get("auth_token");c&&(s.defaults.headers.common["Authorization"]="Token "+c),a.prototype.$api=s}}});